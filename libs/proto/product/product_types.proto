syntax = "proto3";

package product;
import "common/common_types.proto";

option csharp_namespace = "ShopifyClone.ProtoCs.Product.Types";

enum ProductSortBy {
    PRODUCT_SORT_BY_UNSPECIFIED = 0;
    PRODUCT_SORT_BY_NAME = 1;
    PRODUCT_SORT_BY_UPDATED_AT = 2;
}

message ProductData {
    string id = 1;
    string name = 2;
    optional string descr = 3;
    repeated ProductCategoryData categories = 4;
    common.ActiveStatus status = 5;
    string shop_id = 6;
}

message ProductVariantData {
    string id = 1;
    string shop_id = 2;
    string name = 3;
    common.ActiveStatus status = 4;
    repeated VariantOptionValueData variant_option_values = 5;
    ProductData product = 6;
}

message VariantOptionValueData {
    string id = 1;
    string shop_id = 2;
    string name = 3;
    string value = 4;
    string option_value_id = 5;
}

message VariantOption {
    string name = 1;
    repeated string values = 2;
}

message CreateProductRequest {
    string name = 1;
    optional string descr = 2;
    repeated string category_ids = 3;
    repeated VariantOption variant_options = 4;
    common.ActiveStatus status = 5;
    string shop_id = 6;
}

message CreateProductResponse {
    string product_id = 1;
}

message GetProductsRequest {
    string search = 1;
    ProductSortBy sort_by = 2;
    bool desc = 3;
    int32 page_size = 4;
    int32 page_index = 5;
    repeated common.ActiveStatus status = 6;
    string shop_id = 7;
}

message GetProductsResponse {
    repeated ProductVariantData items = 1;
    int64 total_results = 2;
    int32 page_size = 3;
    int32 page_index = 4;
    int32 max_page_index = 5;
}

// Category
message ProductCategoryData {
    string id = 1;
    string name = 2;
    common.ActiveStatus status = 3;
    optional ProductCategoryData parent_category = 4;
    optional string parent_category_id = 5;
    optional string updated_at = 6;
    string shop_id = 7;
}

message CreateProductCategoryRequest {
    string shop_id = 1;
    string name = 2;
    common.ActiveStatus status = 3;
    optional string parent_category_id = 4;
}

message CreateProductCategoryResponse {
    string category_id = 1;
}

message GetProductCategoriesRequest {
    string search = 1;
    ProductCategorySortBy sort_by = 2;
    bool desc = 3;
    int32 page_size = 4;
    int32 page_index = 5;
    repeated common.ActiveStatus status = 6;
    string shop_id = 7;
}

message GetProductCategoriesResponse {
    repeated ProductCategoryData items = 1;
    int64 total_results = 2;
    int32 page_size = 3;
    int32 page_index = 4;
    int32 max_page_index = 5;
}

enum ProductCategorySortBy {
    PRODUCT_CATEGORY_SORT_BY_UNSPECIFIED = 0;
    PRODUCT_CATEGORY_SORT_BY_NAME = 1;
    PRODUCT_CATEGORY_SORT_BY_UPDATED_AT = 2;
}


